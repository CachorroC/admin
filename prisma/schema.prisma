// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model IntCarpeta {
  capitalAdeudaro Int
  numero          Int         @id @default(autoincrement())
  idProceso       BigInt?     @unique
  deudor          Deudor      @relation(fields: [id], references: [cedula])
  id              BigInt
  tipoProceso     TipoProceso @default(SINGULAR)
  category        Category    @default(todo)
  demanda         Demanda     @relation(fields: [llaveProceso], references: [expediente])
  llaveProceso    String
  fecha           DateTime?
}

model Demanda {
  expediente              String       @id
  departamento            String
  municipio               String
  radicado                String
  entregaGarantiasAbogado DateTime     @default(now())
  vencimientoPagare       DateTime?
  obligacion              String[]
  juzgado                 Juzgado[]
  etapaProcesal           String?
  IntCarpeta              IntCarpeta[]
}

model Juzgado {
  id                Int      @id
  tipo              String
  url               String
  Demanda           Demanda? @relation(fields: [demandaExpediente], references: [expediente])
  demandaExpediente String?
}

model Deudor {
  cedula          BigInt       @id @unique
  email           String?
  primerNombre    String
  segundoNombre   String?
  primerApellido  String
  segundoApellido String?
  direccion       String?
  tel             Int[]
  IntCarpeta      IntCarpeta[]
}

enum Category {
  Reintegra
  Insolvencia
  LiosJuridicos
  Bancolombia
  Terminados
  todo
}

enum TipoProceso {
  PRENDARIO
  SINGULAR
  HIPOTECARIO
}
