<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<title>Recepción de Demanda En Linea</title>
	<link rel="stylesheet" href="/demandaenlinea/lib/bootstrap/dist/css/bootstrap.min.css" />
	<link rel="stylesheet" href="/demandaenlinea/css/site.css" />
	<link rel="stylesheet" href="/demandaenlinea/lib/bootstrap/dist/js/bootstrap.js" />
	<link id="Link1" rel="shortcut icon" href="/demandaenlinea/csj.ico" type="image/x-icon" />
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jquery-confirm/3.3.2/jquery-confirm.min.css">
</head>

<body>
	<header>
		<nav class="navbar navbar-expand-sm navbar-toggleable-sm navbar-light bg-white border-bottom box-shadow mb-3"
			style="background-color: #7F0BFB !important;">
			<a class="navbar-brand" href="/demandaenlinea">
				<img src="/demandaenlinea/images/logo_csj.svg" alt="Demanda en Línea" style="height:70px; width: 250px" />
            </a>
				<div class="container">
					<button class="navbar-toggler" type="button" data-toggle="collapse" data-target=".navbar-collapse" aria-controls="navbarSupportedContent"
                        aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
					<div class="navbar-collapse collapse d-sm-inline-flex flex-sm-row-reverse">

						<ul class="navbar-nav">
							<li class="nav-item">
								<a class="nav-link text-white"
									href="/demandaenlinea/AzureAD/Account/SignIn">Ingresar</a>
							</li>
						</ul>

						<ul class="navbar-nav flex-grow-1">
							<li class="nav-item">
								<a class="nav-link text-white"
									href="/demandaenlinea/Manuales/ManualRegistroDemandaEnLínea.pdf"
									target="_blank">Manual de ayuda</a>
							</li>
						</ul>
					</div>
				</div>
		</nav>
	</header>
	<div class="container">
		<main role="main" class="pb-3">

			<fieldset class="scheduler-border">
				<br />
				<br />
				<h2 style="text-align:Center;color:#5908B0">RECEPCIÓN DE DEMANDAS EN LÍNEA</h2>

				<div class="clearfix" style=" clear: both; padding: 0; margin: 0; height: 5px; display: block;"></div>


				<script src='https://www.google.com/recaptcha/api.js'></script>
				<div class="form-horizontal">

					<h4 class="col-md-12 text-center subtitleDemanda"
						style="border: solid !important; background-color: #5908B0 !important; color: white; padding: 10px;">
						Lugar de envío de la Demanda
					</h4>

					<div class="form-row mb-12" style="color:#6D6E71">
						<label class="col-md-2 control-label asterisk" for="Departamento">Departamento</label>
						<div class="col-md-4 ">
							<select class="form-control" disabled="disabled" id="DdlDepartamento" name="DdlDepartamento"><option value="">Seleccione...</option>
<option value="0">Seleccione...</option>
</select>
							<div id="errorDdlDepartamento" class="red" style="display: none;">Campo obligatorio</div>
						</div>

						<label class="col-md-2 control-label asterisk" for="Ciudad">Ciudad</label>
						<div class="col-md-4 ">
							<select class="form-control" id="DDlCiudad" name="DDlCiudad"><option value="">Seleccione...</option>
<option value="0">Seleccione...</option>
</select>
							<div id="errorDDlCiudad" class="red" style="display: none;">Campo obligatorio</div>
						</div>
					</div>
				</div>

				<div class="clearfix" style=" clear: both; padding: 0; margin: 0; height: 5px; display: block;"></div>

				<div class="form-horizontal">
					<h4 class="col-md-12 text-center subtitleDemanda"
						style="border: solid !important; background-color: #5908B0 !important; color: white; padding: 10px;">
						Especialidad y Clase de Proceso
					</h4>

					<div class="form-row mb-12" style="color:#6D6E71">
						<label class="col-md-2 control-label asterisk" for="Especialidad">Especialidad</label>
						<div class="col-md-4">
							<select class="form-control" id="DDlEspecialidad" name="DDlEspecialidad"><option selected="selected" value="-1">Seleccione...</option>
</select>
							<div id="errorDDlEspecialidad" class="red" style="display: none;">Campo obligatorio</div>
						</div>

						<label class="col-md-2 control-label asterisk" for="ClasedeProceso">Clase de Proceso</label>
						<div class="col-md-4">
							<select class="form-control" id="DDlProceso" name="DDlProceso"><option selected="selected" value="-1">Seleccione...</option>
</select>
							<div id="errorDDlProceso" class="red" style="display: none;">Campo obligatorio</div>
						</div>
					</div>
				</div>

				<div class="clearfix" style=" clear: both; padding: 0; margin: 0; height: 5px; display: block;"></div>

				<div class="form-horizontal">
					<h4 class="col-md-12 text-center subtitleDemanda"
						style="border: solid !important; background-color: #5908B0 !important; color: white; padding: 10px;">
						Sujetos Procesales
					</h4>

					<div class="form-row mb-12" style="color:#6D6E71">
						<label class="col-md-2 control-label asterisk" for="TipodeSujeto">Tipo de Sujeto</label>
						<div class="col-md-4">
							<select class="form-control" id="DDlTipoSujeto" name="DDlTipoSujeto"><option selected="selected" value="-1">Seleccione...</option>
</select>
							<div id="errorDDlTipoSujeto" class="red" style="display: none;">Campo obligatorio</div>
						</div>

						<label class="col-md-2 control-label asterisk" for="Tipodepersona">Tipo de persona</label>
						<div class="col-md-4">
							<select class="form-control" id="DDlTipoPersona" name="DDlTipoPersona"><option selected="selected" value="-1">Seleccione...</option>
</select>
							<div id="errorDDlTipoPersona" class="red" style="display: none;">Campo obligatorio</div>
						</div>
					</div>

					<div class="clearfix" style=" clear: both; padding: 0; margin: 0; height: 5px; display: block;">
					</div>

					<div class="form-row mb-12" style="color:#6D6E71">
						<label class="col-md-2 control-label asterisk" for="Tipodocumento">Tipo Documento</label>
						<div class="col-md-4">
							<select class="form-control" id="DDlTipodocumento" name="DDlTipodocumento"><option selected="selected" value="-1">Seleccione...</option>
</select>
							<div id="errorDDlTipodocumento" class="red" style="display: none;">Campo obligatorio</div>
						</div>

						<label class="col-md-2 numDocumento control-label asterisk" for="NumeroDocumento">N&#xFA;mero Documento</label>
						<div class="col-md-4 numDocumento">
							<input class="form-control" id="DocumentodeIdendificacion" name="DocumentodeIdendificacion" type="text" value="" />
							<div id="ProfesionalApoderado" style="display: none;">
								<p>
									<label id="TarjetaProfesional" style="display: none;"></label>
									<label id="Caracter"></label>
									<label id="NumeroTarjeta" style="display: none;"></label>
								</p>
							</div>
							<div id="errorDocumentodeIdendificacion" class="red" style="display: none;">Campo
								obligatorio</div>
						</div>
					</div>

					<div class="clearfix" style=" clear: both; padding: 0; margin: 0; height: 5px; display: block;">
					</div>

					<div class="DvNatural" style="display: none;">
						<div class="form-row mb-12" style="color:#6D6E71">
							<label class="col-md-2 control-label asterisk" for="PrimerNombre">Primer Nombre</label>
							<div class="col-md-4">
								<input class="form-control Mayus" id="PrimerNombre" name="PrimerNombre" type="text" value="" />
								<div id="ErrPrimerNombre" class="red" style="display: none;">Campo obligatorio</div>
							</div>
							<label class="col-md-2 control-label" for="SegundoNombre">Segundo Nombre</label>
							<div class="col-md-4">
								<input class="form-control Mayus" id="SegundoNombre" name="SegundoNombre" type="text" value="" />
                </div>
							</div>

							<div class="clearfix"
								style=" clear: both; padding: 0; margin: 0; height: 5px; display: block;"></div>

							<div class="form-row mb-12" style="color:#6D6E71">
								<label class="col-md-2 control-label asterisk" for="PrimerApellido">Primer Apellido</label>
								<div class="col-md-4">
									<input class="form-control Mayus" id="PrimerApellido" name="PrimerApellido" type="text" value="" />
									<div id="ErrPrimerApellido" class="red" style="display: none;">Campo obligatorio
									</div>
								</div>
								<label class="col-md-2 control-label" for="SegundoApellido">Segundo Apellido</label>
								<div class="col-md-4">
									<input class="form-control Mayus" id="SegundoApellido" name="SegundoApellido" type="text" value="" />
                </div>
								</div>
							</div>

							<div class="DvDiscapacidad clearfix"
								style=" clear: both; padding: 0; margin: 0; height: 5px; display: block;"></div>
							<div class="DvDiscapacidad" style="display: none;">
								<div class="form-row mb-12" style="color:#6D6E71">
									<label class="col-md-2 control-label asterisk" for="TipoDiscapacidad">Tipo de discapacidad</label>
									<div class="col-md-4">
										<select class="form-control" id="DDlTipodiscapacidad" name="DDlTipodiscapacidad"><option selected="selected" value="-1">Seleccione...</option>
</select>
										<div id="errorDDlTipoDiscapacidad" style="display:none;" class="red">Seleccione
											tipo de discapacidad</div>
									</div>
								</div>
							</div>

							<div class="DvJuridico clearfix"
								style=" clear: both; padding: 0; margin: 0; height: 5px; display: block;"></div>

							<div class="DvJuridico" style="display: none;">
								<div class="form-row mb-12" style="color:#6D6E71">
									<label class="col-md-2 control-label asterisk" for="NombreJuridico">Raz&#xF3;n Social</label>
									<div class="col-md-10">
										<input class="form-control Mayus" id="NombreJuridico" name="NombreJuridico" type="text" value="" />
										<div id="ErrNombreJuridico" style="display:none;" class="red">Campo obligatorio
										</div>
									</div>
								</div>
							</div>

							<div class="DvLocalidad clearfix"
								style=" clear: both; padding: 0; margin: 0; height: 5px; display: block;"></div>

							<div class="DvLocalidad">
								<div class="form-row mb-12" style="color:#6D6E71">
									<label class="col-md-2 control-label asterisk" for="Localidad">Localidad de Residencia del Demandado</label>
									<div class="col-md-4">
										<select class="form-control" id="DDlLocalidad" name="DDlLocalidad"><option selected="selected" value="-1">Seleccione...</option>
</select>
										<div id="errorDDlLocalidad" class="red" style="display: none;">Campo obligatorio
										</div>
									</div>
								</div>
							</div>

							<div class="clearfix"
								style=" clear: both; padding: 0; margin: 0; height: 5px; display: block;"></div>

							<div class="form-row mb-12" style="color:#6D6E71">
								<label class="col-md-2 control-label" for="Direccion">Direccion</label>
								<div class="col-md-4">
									<input class="form-control Mayus" id="IdDireccion" name="IdDireccion" type="text" value="" />
            </div>
									<label class="col-md-2 control-label" for="Telefono">Telefono</label>
									<div class="col-md-4">
										<input class="form-control Mayus" id="IdTelefono" name="IdTelefono" type="text" value="" />
            </div>
									</div>

									<div class="IdEmail clearfix"
										style=" clear: both; padding: 0; margin: 0; height: 5px; display: block;"></div>

									<div class="form-row mb-12 IdEmail" style="color:#6D6E71">
										<label class="col-md-2 control-label asterisk" for="Correonotificaciones">Correo para notificaciones</label>
										<div class="col-md-4">
											<input class="form-control " type="Email" id="IdEmail" name="IdEmail" data-validation="IdEmail" placeholder="">
											<div id="xmail" class="red" style="display: none;">Ingresa un email valido
											</div>
											<br />
											<input class="btn" type="button" id="btnValidar" value="Validar correo para notificaciones" onclick="ValidarCorreo()">
            </div>

											<label class="col-md-2 control-label asterisk" for="ConfirmaCorreonotificaciones">Confirmaci&#xF3;n de Correo para notificaciones</label>
											<div class="col-md-4">
												<input class="form-control" type="Email" id="ConfirmaEmail" name="ConfirmaEmail" data-validation="IdEmail" placeholder="" disabled="disabled">
            </div>
											</div>

											<div class="clearfix"
												style=" clear: both; padding: 0; margin: 0; height: 5px; display: block;">
											</div>

											<div class="form-group botonAccionado">
												<div class="col-md-4">
													<input type="button" class="btn btn-primary" id="btnAddAccionado" value="Agregar" />
            </div>
												</div>

												<div class="clearfix"
													style=" clear: both; padding: 0; margin: 0; height: 5px; display: block;">
												</div>

												<div class="table-responsive">
													<table id="tblCustomers" class="tables table-bordered"
														style="display:none">
														<thead>
															<tr>
																<th style="width:120px">Tipo Persona</th>
																<th style="width:120px">Tipo Sujeto</th>
																<th style="width:120px">Documento de Identidad</th>
																<th style="width:120px">Apellidos Nombres / Razón Social
																</th>
																<th style="width:120px">Dirección</th>
																<th style="width:120px">Teléfono</th>
																<th style="width:120px">Correo Electrónico</th>
																<th style="width:120px">Tipo de Discapacidad</th>
																<th style="width:120px">Acción</th>
															</tr>
														</thead>
														<tbody>
														</tbody>
													</table>
												</div>
											</div>

											<div class="clearfix"
												style=" clear: both; padding: 0; margin: 0; height: 5px; display: block;">
											</div>

											<div class="form-horizontal cajaOculta4">
												<h4 class="col-md-12 text-center "
													style="border: solid !important;background-color: #5908B0 !important;color: white;height: 51px; padding: 10px;">
													Archivos Adjuntos
												</h4>

												<div class="form-row" style="color:#6D6E71">
													<div class=" col-md-4">
														<label class="col-md-12 control-label lblArchivo  asterisk" for="MensajeArchivos">Se debe adjuntar como m&#xED;nimo 1 archivo, el tama&#xF1;o no puede se superior a 50 MB</label>
														<p class="red">
															<label id="Adicionar" class="control-label" style="color:#6D6E71">
                        Se Adicionaron 10 MB de tamaño.
                    </label>
															<br />
                    Capacidad de Cargue
															<label id="Capacidad" class="control-label, red"></label>
															MB
														</p>
													</div>

													<div class="clearfix"
														style=" clear: both; padding: 0; margin: 0; height: 5px; display: block;">
													</div>
													<div class="col-md-1"></div>

													<div class="col-md-6">
														<div>
															<label class="col-md-4 control-label" for="TipoArchivo">Tipo Archivo</label>
															<div class="col-md-8">
																<select class="form-control" id="DDlTipoArchivo" name="DDlTipoArchivo"><option selected="selected" value="-1">Seleccione...</option>
</select>
																<div id="errorDDlTipoArchivo" class="red"
																	style="display: none;">Campo obligatorio</div>
															</div>
														</div>
														<br />
														<br />
														<div class="insertFile">
															<input type="file" onchange="validaAdjunto(this.value)" name="ArchivoFile0" id="ArchivoFile0" />
                </div>
															<span id="spnmsg" style="color:red;"></span>
															<div class=" col-md-2">
																<br />
																<input class="btn" type="button" id="btnAddfile" value="Agregar Archivo">
                </div>
															</div>
														</div>

														<div class="clearfix"
															style=" clear: both; padding: 0; margin: 0; height: 5px; display: block;">
														</div>

														<div class="table-responsive col-md-12 ">
															<table id="tblFiles" style="display:none"
																class="tables table-responsive table-bordered"
																cellpadding="0" cellspacing="0">
																<thead>
																	<tr>
																		<th style="width:500px">Nombre</th>
																		<th style="width:200px">Tamaño(MB)</th>
																		<th style="width:200px">Formato</th>
																		<th style="width:200px">Acción</th>
																	</tr>
																</thead>
																<tbody>
																</tbody>
															</table>
														</div>
													</div>

													<div class="clearfix"
														style=" clear: both; padding: 0; margin: 0; height: 5px; display: block;">
													</div>

													<div class="form-horizontal">
														<h4 class="col-md-12 text-center subtitleDemanda clase2"
															style="border: solid !important;background-color:#5908B0  !important; color:white;height: 10px;padding: 6px;">
														</h4>

														<div class="form-row">
															<div class="col-md-8 center-block">
																<form method="post" onsubmit="return comprobarradio();">
																	<div class="g-recaptcha"
																		data-sitekey="6LcnkeUUAAAAAIzytmwnkjif8k066vQVR6EKXFw0"
																		data-callback="verifyCaptcha"></div>
																	<div id="g-recaptcha-error"></div>
																	<input name="__RequestVerificationToken" type="hidden" value="CfDJ8OniZur8_1BEiEQiSUbqxZoj8pvZNTt0a34HG1UZlw_QByj8X5Vdpv-iAXcefP5E9U2gN6qGfsXBW1CV9rpAcLXkQrmQZ_63Fo9n-D1J62xdsM6-lnolh7TI6TNzhTnz7F6ItwfcSTSOPIxT3FjLmq8" /></form>
															</div>

															<div class="col-md-4 center-block">
																<input class="btn btn-primary" type="button" onclick="comprobarradio()" id="enviar" value="ENVIAR">
            </div>
															</div>
														</div>

														<div class="clearfix"
															style=" clear: both; padding: 0; margin: 0; height: 5px; display: block;">
														</div>

														<div class="form-row">
															<h5 class="col-md-12 text-center"
																style="border: solid !important; background-color:#5908B0 !important; color:white; height:100%; padding: 10px;">
																<strong> Si tienes dudas o problemas, contacta a nuestro equipo de soporte al correo: </strong>
																<a href="mailto: soportedemandaenlinea@deaj.ramajudicial.gov.co"
																	style="color:white;">soportedemandaenlinea@deaj.ramajudicial.gov.co</a>
																<br /><br />
																<strong>Navegadores Recomendados:<br /></strong>
																<img width="160" src="/demandaenlinea/images/navegadores.png" alt="Navegadores Recomendados">
																<br />
        </h5>
														</div>

														<style>
															/*ó en un archivo de CSS externo */
															.tables {
																width: 100%;
															}

															.red {
																color: red;
															}

															tr:hover {
																background-color: #f5f5f5;
															}

															th {
																background-color: #5908B0;
																color: white;
															}

															th,
															td {
																padding: 1px;
																text-align: center;
															}

															.lblArchivo {
																TEXT-ALIGN: justify;
															}

															.btn {
																color: #FFFFFF;
																background-color: #7F0BFB;
																border-color: #130269;
															}

															.btn:hover,
															.btn:focus,
															.btn:active,
															.btn.active,
															.open .dropdown-toggle.btn-sample {
																color: #FFFFFF;
																background-color: #49247A;
																border-color: #130269;
															}

															textarea:focus,
															input:focus,
															input[type]:focus {
																border-color: white;
																box-shadow: 0 1px 1px rgba(50, 3, 75, 0.06)inset, 0 0 8px #7F0BFB;
																outline: 0 none;
															}

															.form-control:focus,
															input:focus,
															input[type]:focus {
																border-color: white;
																box-shadow: 0 1px 1px rgba(50, 3, 75, 0.06)inset, 0 0 8px #7F0BFB;
																outline: 0 none;
															}

															.asterisk {
																display: inline-block;
																position: relative;
															}

															.asterisk:after {
																color: #e32;
																content: "*";
																display: block;
																position: absolute;
																right: 0em;
																top: 0;
															}

															.nav.navbar-nav.navbar-right li a {
																color: white !important;
															}

															.nav.navbar-nav li a {
																color: white !important;
															}

															fieldset.scheduler-border {
																border: 1px groove #ddd !important;
																padding: 0 1.4em 1.4em 1.4em !important;
																margin: 0 0 1.5em 0 !important;
																-webkit-box-shadow: 0px 0px 0px 0px #000;
																box-shadow: 0px 0px 0px 0px #000;
															}

															legend.scheduler-border {
																font-size: 1.2em !important;
																font-weight: bold !important;
																text-align: left !important;
															}
														</style>
			</fieldset>



		</main>
	</div>

	<script src="/demandaenlinea/lib/jquery/dist/jquery.min.js"></script>
	<script src="/demandaenlinea/lib/bootstrap/dist/js/bootstrap.bundle.min.js"></script>
	<script src="/demandaenlinea/Scripts/jquery-3.4.1.min.js"></script>
	<script src="/demandaenlinea/Scripts/jquery.validate.min.js"></script>
	<script src="/demandaenlinea/Scripts/jquery.blockUI.js"></script>

	<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-confirm/3.3.2/jquery-confirm.min.js"></script>
	<script src="/demandaenlinea/js/site.js?v=4q1jwFhaPaZgr8WAUSrux6hAuh0XDg9kPS3xIVq36I0"></script>


	<script type="text/javascript">
		$(document).ready(function () {

            //Disable cut copy paste
            $('body').bind('cut copy paste', function (e) {
                e.preventDefault();
            });

            //Disable mouse right click
            $("body").on("contextmenu", function (e) {
                return false;
            });

            VacanciaJudicial()

            $('input#DocumentodeIdendificacion').keypress(function (event) {
                // El código del carácter 0 es 48
                // El código del carácter 9 es 57
                if (this.value.length == valorTipoDocumento.valor) {
                    return false;
                }
            });

            $('input#IdTelefono').keypress(function (event) {
                // El código del carácter 0 es 48
                // El código del carácter 9 es 57
                if (event.which < 48 || event.which > 58 || this.value.length === 10) {
                    return false;
                }
            });
        });

        function VacanciaJudicial() {
            var data = "inicio";
            $.ajax({
                url: '/demandaenlinea/Demanda/VacanciaJudicial',
                type: "GET",
                dataType: "json",
                contentType: "application/json; charset=utf-8",
                data: { Ventana: data },
                cache: false,
                success: function (result) {
                    $.unblockUI();
                    if (result.data) {
                        $.confirm({
                            icon: 'fa fa-spinner fa-spin',
                            title: "Información Importante",
                            content: '<div style="text-align: justify">' + result.result + '</div>' +
                                '<br/>' +
                                'Muchas Gracias por su Atención',
                            type: 'purple',
                            typeAnimated: true,
                            buttons: {
                                Continuar: {
                                    btnClass: 'btn-purple',
                                    action: function () {
                                        if (result.alert) {
                                            Inicio()
                                        }
                                        else {
                                            debugger
                                            var wwwUrlPath = window.document.location.href;
                                            if(wwwUrlPath.length <= 24){
                                                window.location.href = wwwUrlPath + 'Home/Navidad';
                                            }
                                            else
                                            {
                                                window.location.href = wwwUrlPath + '/' + 'Home/Navidad';
                                            }
                                        }
                                    }
                                },
                            }
                        });
                    }
                    else {
                        Inicio()
                    }
                },
                error: function(jqXHR, textStatus, error) {
                    $('.model-status').text("Estado: Error inesperado");
                }
            });
        }

        function Inicio() {
            $.confirm({
                backgroundDismissAnimation: 'glow',
                columnClass: 'col-md-10 col-md-offset-1',
                title: false,
                backgroundDismiss: false,
                content:
                    '<div style="text-align: justify"> En virtud de la emergencia por el COVID-19, los Decretos nacionales al respecto y de los Acuerdos vigentes del Consejo Superior de la Judicatura en materia de seguridad informática, se privilegia el uso de medios tecnológicos para la recepción y comunicación de las acciones y peticiones con las autoridades.</div>' +
                    '<br />' +
                    '<div style="text-align: justify"> <strong>CONDICIONES DEL PORTAL</strong><br/>' +
                    '<br />' +
                    '<div style="text-align: justify"> La recepción de demandas en línea actualmente está habilitada para la ciudad de <strong>BOGOTÁ</strong>. ' +
                    'Si desea interponer una Demanda en otra ciudad, debe hacerlo a través de correo electrónico, el cual puede consultar haciendo clic <a href="https://www.ramajudicial.gov.co/web/10228/1300">aquí<a> </div>' +
                    '<br />' +
                    '<div style="text-align: justify"> A través de este portal se recibe la solicitud que posteriormente será enviada a un juez competente. </div>' +
                    '<br />' +
                    '<div style="text-align: justify">Se recogen unos datos básicos en el formulario y en el(los) documento(s) que anexe debe incluir la demanda y eventuales anexos.</div>' +
                    '<br />' +
                    '<div style="text-align: justify">Recuerde que debe cumplir con los requisitos legales para la presentación de cada demanda.</div>' +
                    '<br />' +
                    'Las comunicaciones, notificaciones, decisiones, recursos, incidentes se tramitarán por los medios más expeditos que establezca el juez competente, con prevalencia del correo electrónico institucional, ' +
                    'que emplearán para el registro y trámite de las demandas.' +
                    '<br/><br/><strong> DATOS PERSONALES</strong><br/>' +
                    '<br/>' +
                    'Para dar cumplimiento a: Ley 1266 de 2008, ley 1273 de 2009 y Ley 1581 de 2012 y demás normas reglamentarias que regulan el Hábeas Data y la Protección de Datos Personales, ' +
                    'AUTORIZO, únicamente para efectos de la presentación de esta radicación,  su consecuente reparto e información sobre el trámite, llevar a cabo el tratamiento de mis datos personale, ' +
                    'tales como mi nombre, documento de identificación, número telefónico y correo electrónico.' +
                    '<div class="checkbox"><label style="color:red"><input type="checkbox" id="enableCheckbox"> He leído el contenido y acepto los términos y condiciones </label></div></div>' +
                    '<br/>' +
                    '<div style="text-align: center">Navegadores Recomendados:' + '<br/>' +
                    '<i><img width="160" src="/DemandaEnLinea/images/navegadores.png" alt="Navegadores Recomendados"><br />. </i>',
                buttons: {
                    Continuar:
                    {
                        //btnClass: 'btn-violet',
                        //action: function () {
                        //    enviarRama()
                        //}
                        btnClass: 'btn-violet',
                        action: function () {
                            if ($("#enableCheckbox:checkbox").is(':checked')) {
                                //ValidarConsejoEstado();
                                var $checkbox = this.$content.find('#enableCheckbox');
                                GetDepartamentos();
                                GetTipoSujeto();
                                //GetEspecialidad();
                                GetPersona();
                                GetTipoDiscapacidad();
                                $(".DvDiscapacidad").hide();
                                $("#Capacidad").text(limite);
                                GetTipoArchivo();
                                CapacidadActual = limite;
                                $("#Adicionar").hide();
                                $(".DvLocalidad").hide(); //DavidOchoa INC2022-011
                                return $checkbox.prop('checked');
                            } else {
                                $("#enableCheckbox").focus();
                            }
                            return false;
                        }
                    },
                    Salir:
                    {
                        btnClass: 'btn-violet',
                        action: function () {
                            enviarRama()
                        }
                    }
                }
            });
        }

        function enviarRama() {
            location.href = window.location.href =('https://www.ramajudicial.gov.co/');
        }

        function ValidarConsejoEstado() {
            $.ajax({
                method: "GET",
                url: '/demandaenlinea/Demanda/ValidarConsejoEstado',
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                data: {},
                success: function (data) {
                    if (!data.data) {
                        //$.confirm({
                        //    icon: 'fa fa-spinner fa-spin',
                        //    title: false,
                        //    content: 'Si su demanda aplica directamente al Consejo de Estado, haga clic en ir a Consejo de Estado, de lo contrario haga clic en Continuar ',
                        //    type: 'purple',
                        //    typeAnimated: true,
                        //    buttons: {
                        //        'Consejo de Estado': {
                        //            btnClass: 'btn-purple',
                        //            action: function () {
                                        if ($("#DDlEspecialidad").val() == data.result[0].idCatalogoDetalle) {
                                            location.href = window.location.href = ('' + data.result[0].valor1 + '');
                                            $.blockUI({ message: '<img src="https://procesojudicial.ramajudicial.gov.co/demandaenlinea/images/loadingblack.gif" class="load-peg" />' });
                                        }
                        //            }
                        //        },
                        //        Continuar: {
                        //            btnClass: 'btn-purple',
                        //            action: function () {
                        //            }
                        //        },
                        //    }
                        //});
                    }
                }, //End of AJAX Success function

                failure: function (data) {
                    console.log(data);
                },
                error: function (data) {
                    console.log(data);
                }
            });
        }

        function validacorreos() {
            var cont = $('#ConfirmaEmail').val().toUpperCase();
            var cont2 = $('#IdEmail').val().toUpperCase();

            if (cont2 != cont) {
                return ConfirmaDatos("IdEmail", "El correo no coincide")
            }
        }

        function comprobarradio() {
            submitUserForm();
        }

        function submitUserForm() {
            if ($("#DdlDepartamento").val() == "" || $('#DdlDepartamento  :selected').val() == "-1") {
                return ConfirmaDatos("DdlDepartamento", "Seleccione el Departamento")
            }

            if ($("#DDlCiudad").val() == "" || $('#DDlCiudad  :selected').val() == "-1") {
                return ConfirmaDatos("DDlCiudad", "Seleccione la Ciudad")
            }

            if ($("#DDlEspecialidad").val() == "" || $('#DDlEspecialidad  :selected').val() == "-1") {
                return ConfirmaDatos("DDlEspecialidad", "Seleccione la Especialidad")
            }

            if ($("#DDlProceso").val() == "" || $('#DDlProceso  :selected').val() == "-1") {
                return ConfirmaDatos("DDlProceso", "Seleccione la Clase de Proceso")
            }

            if (valArray.length == 0) {
                return ConfirmaDatos("DDlTipoArchivo", "Por favor adjuntar un documento, Recuerde que el archivo de la Demanda es obligatorio.")
            }
            else if (!bandera) {
                return ConfirmaDatos("DDlTipoArchivo", "El Tipo Archivo de Demanda es obligatorio")
            }

            var accion = obtenerAccionados()
            if (accion[0].length == 0) {
                return ConfirmaDatos("DDlTipoSujeto", "Debe agregar un accionado/s")
            }

            var response = grecaptcha.getResponse();

            if (response.length == 0) {
                document.getElementById('g-recaptcha-error').innerHTML = '<span style="color:red;">Este campo es obligatorio.</span>';
            }
            else {
                ConfirmarDatos();
            }
        }

        function ConfirmarDatos() {
            var accion = obtenerAccionados()
            var Confirmar = "Departamento: " + $('#DdlDepartamento :selected').text();
            Confirmar += "<br />";
            Confirmar += "Ciudad: " + $('#DDlCiudad :selected').text();
            Confirmar += "<br />";
            Confirmar += "Especialidad: " + $('#DDlEspecialidad :selected').text();
            Confirmar += "<br />";
            Confirmar += "Clase Proceso: " + $('#DDlProceso :selected').text();

            for (var i = 0; i <= accion[0].length - 1; i++) {
                Confirmar += "<br /><br />";
                var nombreJ = accion[0][i].NombreJuridico.toString();
                var Documento = accion[0][i].DocumentoIdentidad.toString();
                if (Documento == "0") {
                    Documento = "Tipo Documento: Desconocido"
                }
                else {
                    Documento = accion[0][i].TipoDocumento + ": " + accion[0][i].DocumentoIdentidad.toString() + ",";
                }
                if (nombreJ != "") {
                    Confirmar += "Tipo Sujeto: " + accion[0][i].TipoSujeto.toString();
                    Confirmar += "<br />";
                    Confirmar += "Persona Jurídica:  " + accion[0][i].NombreJuridico.toString();
                }
                else {
                    Confirmar += "Tipo Sujeto: " + accion[0][i].TipoSujeto.toString();
                    Confirmar += "<br />";
                    Confirmar += "Persona Natural: " + accion[0][i].PrimerNombre.toString() + " " + accion[0][i].SegundoNombre.toString() + " " + accion[0][i].PrimerApellido.toString() + " " + accion[0][i].SegundoApellido.toString() + " ";
                }
                Confirmar += "<br />";
                Confirmar += Documento;
                Confirmar += "<br />";
                Confirmar += "Correo Electrónico: " + accion[0][i].Email.toString();

                //DavidOchoa INC2022-011
                if (accion[0][i].IdLocalidad.toString() != "-1") {
                    Confirmar += "<br />";
                    Confirmar += "Localidad del Demandado: " + accion[0][i].Localidad.toString();
                }

                Confirmar += "<br />";
                Confirmar += "Dirección: " + accion[0][i].Direccion.toString();
                Confirmar += "<br />";
                Confirmar += "Teléfono: " + accion[0][i].Telefono.toString();

                if (accion[0][i].IdTipoDiscapacidad.toString() != 0) {
                    Confirmar += "<br />";
                    Confirmar += "Tipo de discapacidad: " + accion[0][i].TipoDiscapacidad.toString();
                }
            }

            $.confirm({
                title: 'Confirmar Datos',
                content: Confirmar,
                type: 'purple',
                typeAnimated: true,
                buttons: {
                    Si: {
                        btnClass: 'btn-violet',
                        action: function () {
                            Save()
                        }
                    },
                    No: {
                        btnClass: 'btn-violet',
                        action: function () { }
                    }
                }
            });
        }

        function caracteresCorreoValido(email, div) {
            var caract = /^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,6})+$/;

            //if (caract.test(email) == false)
            if (email.match(caract) == null){
                $(div).hide().removeClass('hide').slideDown('fast');
                return false;
            } else {
                $(div).hide();
                return true;
            }
        }

        function verifyCaptcha() {
            document.getElementById('g-recaptcha-error').innerHTML = '';
        }

        $("#DdlDepartamento").change(function () {
            var Idciudad = $("#DdlDepartamento").val();
            GetCiudades(Idciudad);
        });

        //DavidOchoa INC2022-011
        $("#DDlCiudad").change(function () {
            var Idciudad = $("#DDlCiudad").val();
            GetLocalidad(Idciudad);
        });

        $("body").on("click", "#btnAddAccionado", function () {
            if ($('#DDlTipoSujeto  :selected').val() == "-1") {
                return ConfirmaDatos("DDlTipoSujeto", "Debe seleccionar el tipo de Sujeto")
            }

            if ($('#DDlTipoPersona  :selected').val() == "-1") {
                return ConfirmaDatos("DDlTipoPersona", "Debe seleccionar el tipo de Persona")
            }

            //DavidOchoa INC2022-011
            if ($('#DDlLocalidad  :selected').val() == "-1") {
                if ($("#DDlTipoSujeto").val() == "1226" && $("#DDlEspecialidad :selected").val() == "1232") {
                    return ConfirmaDatos("DDlLocalidad", "Debe seleccionar la Localidad")
                }
            }

            if ($('#DDlTipoSujeto  :selected').val() == "1225" || $('#DDlTipoSujeto  :selected').val() == "1227") {
                if ($('#IdEmail').val() == "") {
                    return ConfirmaDatos("IdEmail", "Debe Digitar el Correo Electrónico")
                }

                if ($('#ConfirmaEmail').val() == "") {
                    return ConfirmaDatos("IdEmail", "Debe Confirmar el Correo Electrónico")
                }
                validacorreos();

                if ($('#DDlTipoPersona  :selected').val() == "1164") {
                    if ($('#DDlTipodiscapacidad  :selected').val() == "-1") {
                        return ConfirmaDatos("DDlTipodiscapacidad", "Debe seleccionar el tipo de discapacidad")
                    }
                }
            }

            if ($('#DDlTipodocumento  :selected').val() == "-1") {
                return ConfirmaDatos("DDlTipodocumento", "Debe seleccionar el tipo de Documento")
            } else
                if ($('#DocumentodeIdendificacion').val() == "") {
                    if ($("#DDlTipodocumento :selected").val() == "1168") {
                        $("#DocumentodeIdendificacion").val("0")
                    }
                    else {
                        return ConfirmaDatos("DocumentodeIdendificacion", "Debe Digitar Número Documento")
                    }
                }

            if ($('#DDlTipoPersona  :selected').val() == "1164") {
                if ($('#PrimerNombre').val() == "") {
                    return ConfirmaDatos("PrimerNombre", "Debe Digitar Primer Nombre")
                }
                if ($('#PrimerApellido').val() == "") {
                    return ConfirmaDatos("PrimerApellido", "Debe Digitar Primer Apellido")
                }
            }

            if ($('#DDlTipoPersona  :selected').val() == "1165") {
                if ($('#NombreJuridico').val() == "") {
                    return ConfirmaDatos("NombreJuridico", "Debe Digitar Razón Social")
                }
            }

            if ($('#DDlTipoSujeto  :selected').val() != "1226") {
                var si = caracteresCorreoValido($('#IdEmail').val(), '#xmail');
                if (si == false) {
                    return ConfirmaDatos("DDlTipoSujeto", "Email Invalido")
                }
            }

            $("#tblCustomers").show()
            //Get the reference of the Table's TBODY element.
            var tBody = $("#tblCustomers > TBODY")[0];

            //Add Row.
            var row = tBody.insertRow(-1);

            //Texto Tipo Persona
            var cell = $(row.insertCell(-1));
            cell.addClass("Mayus");
            cell.html($('#DDlTipoPersona  :selected').text());

            //Valor Tipo Persona
            cell = $(row.insertCell(-1));
            cell.attr("style", "display:none");
            cell.html($('#DDlTipoPersona  :selected').val());

            //Texto Tipo Sujeto
            cell = $(row.insertCell(-1));
            cell.addClass("Mayus");
            cell.html($('#DDlTipoSujeto  :selected').text());

            //Valor Tipo Sujeto
            cell = $(row.insertCell(-1));
            cell.attr("style", "display:none");
            cell.html($('#DDlTipoSujeto  :selected').val());

            //Texto Tipo Documento.
            cell = $(row.insertCell(-1));
            cell.attr("style", "display:none");
            cell.html($('#DDlTipodocumento  :selected').text());

            //Valor Tipo Documento
            cell = $(row.insertCell(-1));
            cell.attr("style", "display:none");
            cell.html($('#DDlTipodocumento  :selected').val());

            //Numero de Documento
            if ($("#DDlTipodocumento :selected").val() == "-1") {
                cell = $(row.insertCell(-1));
                cell.attr("style", "display:none");
                cell.html("Desconocido");
            }
            else {
                cell = $(row.insertCell(-1));
                cell.attr("style", "display:none");
                cell.html($('#DocumentodeIdendificacion').val());
            }

            //Tipo Documento + Numero Documento
            var DDLTipoDoc = $('#DDlTipodocumento  :selected').val()
            var Documento

            if (DDLTipoDoc != "1168") {
                var TipodocumentoCodigo = TipoDocumentoArr[DDLTipoDoc]
                Documento = TipodocumentoCodigo + ' - ' + $('#DocumentodeIdendificacion').val()
            } else {
                Documento = $('#DDlTipodocumento  :selected').text()
            }

            cell = $(row.insertCell(-1));
            cell.html(Documento);

            //Valor NombreJuridico
            cell = $(row.insertCell(-1));
            cell.addClass("Mayus");
            cell.attr("style", "display:none");
            cell.html($('#NombreJuridico').val());

            //Valor PrimerNombre
            cell = $(row.insertCell(-1));
            cell.addClass("Mayus");
            cell.attr("style", "display:none");
            cell.html($('#PrimerNombre').val());

            //Valor SegundoNombre
            cell = $(row.insertCell(-1));
            cell.addClass("Mayus");
            cell.attr("style", "display:none");
            cell.html($('#SegundoNombre').val());

            //Valor PrimerApellido
            cell = $(row.insertCell(-1));
            cell.addClass("Mayus");
            cell.attr("style", "display:none");
            cell.html($('#PrimerApellido').val());

            //Valor SegundoApellido
            cell = $(row.insertCell(-1));
            cell.addClass("Mayus");
            cell.attr("style", "display:none");
            cell.html($('#SegundoApellido').val());

            //NombreJuridico + PrimerNombre + SegundoNombre + PrimerApellido + SegundoApellido
            cell = $(row.insertCell(-1));
            cell.addClass("Mayus");
            cell.html($('#NombreJuridico').val() + ' ' + $('#PrimerApellido').val() + ' ' + $('#SegundoApellido').val() + ' ' + $('#PrimerNombre').val() + ' ' + $('#SegundoNombre').val());

            //DavidOchoa INC2022-011
            var textlocalidad = "";
            if ($('#DDlLocalidad').val() != "-1") {
                textlocalidad = $('#DDlLocalidad  :selected').text()
            }

            //Valor IdDireccion
            cell = $(row.insertCell(-1));
            cell.addClass("Mayus");
            cell.html(textlocalidad + ' ' + $('#IdDireccion').val());

            cell = $(row.insertCell(-1));
            cell.attr("style", "display:none");
            cell.html($('#IdDireccion').val());

            //Valor IdTelefono
            cell = $(row.insertCell(-1));
            cell.addClass("Mayus");
            cell.html($('#IdTelefono').val());

            //Valor IdEmail
            cell = $(row.insertCell(-1));
            cell.addClass("Mayus");
            cell.html($('#IdEmail').val());

            //Valor EsTarjetaProvisional
            var EsTarjetaProvisional = null
            if ($("#TarjetaProfesional").text() == "Licencia Temporal") {
                EsTarjetaProvisional = "1";
            }
            else if ($("#TarjetaProfesional").text() == "Tarjeta Profesional") {
                EsTarjetaProvisional = "0";
            }

            cell = $(row.insertCell(-1));
            cell.addClass("Mayus");
            cell.attr("style", "display:none");
            cell.html(EsTarjetaProvisional);

            //Valor NumeroTarjeta
            var NumeroTarjeta = $('#NumeroTarjeta').text();
            cell = $(row.insertCell(-1));
            cell.addClass("Mayus");
            cell.attr("style", "display:none");
            cell.html(NumeroTarjeta);

            //Texto tipo de discapacidad
            var TextDiscapacidad = "";
            var ValDiscapacidad = "0";
            if ($('#DDlTipodiscapacidad').val() != '-1') {
                TextDiscapacidad = $('#DDlTipodiscapacidad  :selected').text();
                ValDiscapacidad = $('#DDlTipodiscapacidad  :selected').val();
            };

            var cell = $(row.insertCell(-1));
            cell.addClass("Mayus");
            cell.html(TextDiscapacidad);

            //Valor Tipo de discapacidad
            cell = $(row.insertCell(-1));
            cell.attr("style", "display:none");
            cell.html(ValDiscapacidad);

            //DavidOchoa INC2022-011
            //Texto Localida.
            cell = $(row.insertCell(-1));
            cell.attr("style", "display:none");
            cell.html($('#DDlLocalidad  :selected').text());

            //DavidOchoa INC2022-011
            //Valor Localida
            cell = $(row.insertCell(-1));
            cell.attr("style", "display:none");
            cell.html($('#DDlLocalidad  :selected').val());

            //Boton
            cell = $(row.insertCell(-1));
            var btnRemove = $("<input />");
            btnRemove.attr("type", "button");
            btnRemove.attr("onclick", "RemoveAccionado(this);");
            btnRemove.addClass("btn btn-primary");
            btnRemove.val("Eliminar");

            cell.append(btnRemove);

            //Clear the TextBoxes.
            $("#DDlTipoPersona").val("-1")
            $("#DDlTipoSujeto").val("-1")
            $("#DDlTipodocumento").val("-1")
            $("#DocumentodeIdendificacion").val("");
            Limpiar();

            $(".DvJuridico").hide();
            $(".DvNatural").hide();

            $("#DDlTipodocumento").uniqueId

            $("#DDlTipoSujeto").prop("disabled", false);
        });

        //Validaciones Numeros
        $('#DocumentodeIdendificacion').on('input', function () {
            if (valorTipoDocumento.valor1 == "INT") {
                this.value = this.value.replace(/[^0-9]/g, '');
            }
        });

        $('#IdTelefono').on('input', function () {
            this.value = this.value.replace(/[^0-9]/g, '');
        });

        //Valida que no tenga ninguno de los siguientes caracteres
        $('#PrimerNombre').on('input', function () {
            this.value = this.value.replace(/[0-9_~\-!@#\$%\^&\*\(\)\s]+$/g, '');
        });

        $('#SegundoNombre').on('input', function () {
            this.value = this.value.replace(/[0-9_~\-!@#\$%\^&\*\(\)]+$/g, '');
        });

        $('#PrimerApellido').on('input', function () {
            this.value = this.value.replace(/[0-9_~\-!@#\$%\^&\*\(\)\s]+$/g, '');
        });

        $('#SegundoApellido').on('input', function () {
            this.value = this.value.replace(/[0-9_~\-!@#\$%\^&\*\(\)]+$/g, '');
        });

        function validarArchivo(idarchivo)
        {
            debugger
            $("#Adicionar").hide();
            $('#spnmsg').text('').hide();
            var tamanioArchivo = $("#" + idarchivo).get(0).files[0].size;
            var capacidad = convertir * CapacidadActual;
            total = (capacidad - tamanioArchivo) / (convertir)

            var archivo = $("#" + idarchivo).val();
            var nombreExtension = archivo.split('\\')[archivo.split('\\').length - 1];
            var separador = nombreExtension.lastIndexOf('.');
            var extension = nombreExtension.substring(separador+1);
            var nombre = nombreExtension.substring(separador,-1);
            var acepta = GetExtension(extension.toUpperCase().toString());

            var caract = new RegExp(/^[a-zA-Z0-9\u00E0-\u00FC\-_.\s]*$/g);

            if (caract.test(nombre) == false) {
                $('#spnmsg').text("NO se permiten caracteres especiales en el nombre del archivo ($%&..?¿:)").show();
                return false;
            }

            if (acepta.includes(false)) {
                $('#spnmsg').text("La Extensión del archivo no esta permitido").show();
                return false;
            }

            if ($("#" + idarchivo).get(0).files[0].size > (convertir * (limite + extender))) {
                $('#spnmsg').text("El archivo supera los " + limite + " MB de capacidad").show();
                return false;
                //Disable Submit Button
            }
            else {
                if (total < 0) {
                    $("#Adicionar").show();
                    var valor = extender + total;
                    if (total > -10) {
                        $("#Capacidad").text(valor.toFixed(4))
                    }

                    if (total < -10) {
                        $('#spnmsg').text("El archivo sobrepasa la capacidad actual").show();
                        return false;
                    } else {
                        return true;
                    }
                }
                else {
                    if ($("#" + idarchivo).get(0).files[0].size == 0) {
                        $('#spnmsg').text("El archivo se encuentra dañado").show();
                        $("#" + idarchivo).replaceWith($("#" + idarchivo).val('').clone(true));
                        //Disable Submit Button
                        return false;
                    }
                    //Clear and Hide message span
                    return true;
                    //Enable Submit Button
                }
            }
        }

        function agregarArchivo(idarchivo) {
            valArray.push("#" + idarchivo);
            files = $("#" + idarchivo).get(0).files;

            var ri = files[0]
            //Tamaño en kilobytes
            ri.size;
            //obtener la fecha
            var d = new Date();
            var n = d.toLocaleString(['en-GB'], { hour24: true })
            var horaFinal = n.replace(/[\/\:\,]/g, "").replace(/\ /g, "_")
            //n tiene el valor de la fecha
            //Agregamos el nombre de archivo
            var nombreArchivoFormato = ri.name.toString();
            var lastIndex = nombreArchivoFormato.lastIndexOf('.');
            var nombreArchivo = nombreArchivoFormato.substring(lastIndex, 0);
            var nombreFormato = nombreArchivoFormato.substring(lastIndex + 1);
            var doc = $("#DDlTipoArchivo :selected").text() + "" + horaFinal + "." + nombreFormato;

            //Get the reference of the Table's TBODY element.
            var tBody = $("#tblFiles > TBODY")[0];

            //Add Row.
            var row = tBody.insertRow(-1);

            //Add Nombre cell.
            var cell = $(row.insertCell(-1));
            cell.html(doc);

            // Tamaño
            var cell = $(row.insertCell(-1));
            //cell.attr("style", "display:none");
            var tam = parseFloat(ri.size) / parseFloat(convertir);
            cell.html(tam.toFixed(2));

            var cell = $(row.insertCell(-1));
            //cell.html(ri.type.split('/').pop().toLowerCase());
            cell.html(nombreFormato);

            // Nombre Archivo
            var cell = $(row.insertCell(-1));
            cell.attr("style", "display:none");
            cell.html(ri.name);

            var cell = $(row.insertCell(-1));
            cell.attr("style", "display:none");
            cell.html(idarchivo.toString());

            //Add Button cell.
            cell = $(row.insertCell(-1));
            var btnRemove = $("<input />");
            btnRemove.attr("type", "button");
            btnRemove.attr("onclick", "RemoveFile(this);");

            btnRemove.attr("name", idarchivo.toString());
            btnRemove.addClass("btn btn-primary");
            btnRemove.val("Eliminar");

            cell.append(btnRemove);

            var tamanioArchivo = ri.size
            var capacidad = convertir * $("#Capacidad").text()
            var total = parseFloat((capacidad) - parseFloat(tamanioArchivo)) / parseFloat(convertir)

            if ($("#DDlTipoArchivo :selected").val() == "1325") {
                bandera = true;
            }
        }

        //campos obligatorios
        //TipoPersona
        $("#DDlTipoPersona").on('blur', function () {
            accionDDlTipoSujeto();
            if ($("#DDlTipoPersona :selected").val() == "-1") {
                $("#errorDDlTipoPersona").hide().removeClass('hide').slideDown('fast');
                return false;
            }
            $("#errorDDlTipoPersona").hide();
        });

        //TipoSujeto
        $("#DDlTipoSujeto").on('blur', function () {
            accionDDlTipoSujeto()
            if ($("#DDlTipoSujeto :selected").val() == "-1") {
                $("#errorDDlTipoSujeto").hide().removeClass('hide').slideDown('fast');
                return false;
            }
            $("#errorDDlTipoSujeto").hide();
        });

        //PrimerNombre
        $("#PrimerNombre").on('blur', function () {
            if ($("#PrimerNombre").val() == "" && $('#DDlTipoSujeto  :selected').val() == "1225") {
                $("#errorPrimerNombre").hide().removeClass('hide').slideDown('fast');
                return false;
            }
            $("#errorPrimerNombre").hide();
        });

        //PrimerApellido
        $("#PrimerApellido").on('blur', function () {
            if ($("#PrimerApellido").val() == "" && $('#DDlTipoSujeto  :selected').val() == "1225") {
                $("#errorPrimerApellido").hide().removeClass('hide').slideDown('fast');
                return false;
            }
            $("#errorPrimerApellido").hide();
        });

        //Direccion
        $("#Direccion").on('blur', function () {
            if ($("#Direccion").val() == "") {
                $("#errorDireccion").hide().removeClass('hide').slideDown('fast');
                return false;
            }
            $("#errorDireccion").hide();
        });

        //telefono
        $("#telefono").on('blur', function () {
            if ($("#telefono").val() == "") {
                $("#errortelefono").hide().removeClass('hide').slideDown('fast');
                return false;
            }
            $("#errortelefono").hide();
        });

        //razon Social
        $("#NombreJuridico").on('blur', function () {
            if ($("#NombreJuridico").val() == "") {
                $("#ErrNombreJuridico").hide().removeClass('hide').slideDown('fast');
                return false;
            }
            $("#ErrNombreJuridico").hide();
        });

        //IdEmail
        $("#IdEmail").on('blur', function () {
            $("#xmail").hide().removeClass('hide').slideDown('fast');
            if ($('#IdEmail').val() != "") {
                var si = caracteresCorreoValido($('#IdEmail').val(), '#xmail')
                if (si) {
                    if ($("#DDlTipoSujeto :selected").val() == "1225" || $("#DDlTipoSujeto :selected").val() == "1227") {
                        $("#xmail").hide();
                    }
                }
            }
        });

        function Limpiar() {
            $("#TarjetaProfesional").text("");
            $("#Caracter").text("");
            $("#NumeroTarjeta").text("");
            $("#NombreJuridico").val("")
            $("#PrimerNombre").val("")
            $("#SegundoNombre").val("")
            $("#PrimerApellido").val("")
            $("#SegundoApellido").val("")
            $("#IdEmail").val("")
            $("#ConfirmaEmail").val("")
            $("#IdTelefono").val("")
            $("#IdDireccion").val("")
            $("#Localidad").val("") //DavidOchoa INC2022-011
            $("#Caracter").hide()
        }

        //DDl #DDlTipodocumento
        $("#DDlTipodocumento").on('blur', function () {
            Limpiar();
            $("#DocumentodeIdendificacion").val("")
            if ($("#DDlTipodocumento :selected").val() == "-1" && $('#DDlTipoSujeto  :selected').val() == "1225") {
                $("#error#DDlTipodocumento").hide().removeClass('hide').slideDown('fast');
                return false;
            }
            $("#error#DDlTipodocumento").hide();
        });

        //Documento de identificacion accionado
        $("#DocumentodeIdendificacion").on('blur', function () {
            Limpiar();

            if ($('#DDlTipodocumento  :selected').val() == "-1") {
                return ConfirmaDatos("DDlTipodocumento", "Debe seleccionar el tipo de Documento")
            }

            if ($("#DocumentodeIdendificacion").val() == "" && $('#DDlTipoSujeto  :selected').val() == "1225") {
                $("#errorDocumentodeIdendificacion").hide().removeClass('hide').slideDown('fast');
                return false;
            } else {
                $("#errorDocumentodeIdendificacion").hide();
            }
            /*se cambia el límite de números en el documento del Demandante*/
            if ($("#DocumentodeIdendificacion").val().length < 4 /*&& ($('#DDlTipodocumento :selected').val() != "1162" || $('#DDlTipodocumento :selected').val() != "1168")*/) {
                return ConfirmaDatos("DocumentodeIdendificacion", "El número de documento no es valido")
            }
            else if ($('#DDlTipodocumento :selected').val() == "1162" && $("#DocumentodeIdendificacion").val().length != 10) {
                return ConfirmaDatos("DocumentodeIdendificacion", "El número de NIT debe contener el dígito de Verificación")
            }

            $("#ProfesionalApoderado").hide()

            if ($('#DDlTipoSujeto  :selected').val() == "1227") {
                ConsultarAbogado($("#DocumentodeIdendificacion").val());
            } else {
                ConsultarDocumento($("#DocumentodeIdendificacion").val())
                $("#PrimerNombre").focus();
            }
        });

        function ConsultarDocumento(Documento) {
            $.blockUI({ message: '<img src="https://procesojudicial.ramajudicial.gov.co/demandaenlinea/images/loadingblack.gif" class="load-peg" />' });
            data1 = Documento
            data2 = $('#DDlTipodocumento  :selected').val()
            $.ajax({
                url: '/demandaenlinea/Demanda/ConsultarPersona',
                type: "GET",
                dataType: "json",
                contentType: "application/json; charset=utf-8",
                data: { Documento: data1, Tipodocumento: data2 },
                cache: false,
                success: function (result) {
                    $.unblockUI();
                    if (result.result.length > 0) {
                        if (result.result[0].IdError == 1) {
                            $.confirm({
                                icon: 'fa fa-spinner fa-spin',
                                title: 'Alerta',
                                content: result.result[0].texterror,
                                type: 'purple',
                                typeAnimated: true,
                                buttons: {
                                    Continuar: {
                                        btnClass: 'btn-purple',
                                        action: function () {
                                            $("#DocumentodeIdendificacion").val("");
                                            $("#DDlTipodocumento").focus();
                                        }
                                    },
                                }
                            });
                        }
                        else {
                            $("#NombreJuridico").val(result.result[0].nombreJuridico)
                            $("#PrimerNombre").val(result.result[0].primerNombre)
                            $("#SegundoNombre").val(result.result[0].segundoNombre)
                            $("#PrimerApellido").val(result.result[0].primerApellido)
                            $("#SegundoApellido").val(result.result[0].segundoApellido)
                            if ($("#DDlTipoSujeto :selected").val() == "1226") {
                                $("#IdEmail").val("")
                            } else {
                                $("#IdEmail").val(result.result[0].email)
                            }
                            $("#IdTelefono").val(result.result[0].telefono)
                            $("#IdDireccion").val(result.result[0].direccion)
                            $("#TipoDiscapacidad").val(result.result[0].TipoDiscapacidad)
                            $('#IdEmail').focus();
                        }
                    }
                },
                error: function(jqXHR, textStatus, error) {
                    $('.model-status').text("Estado: Error inesperado");
                }
            });
        }

        function ConsultarAbogado(Documento) {
            var color = $("#NumeroTarjeta").css('color');
            $("#Caracter").css('color', color);
            $("#Caracter").show()
            $("#ProfesionalApoderado").show()
            $.blockUI({ message: '<img src="https://procesojudicial.ramajudicial.gov.co/demandaenlinea/images/loadingblack.gif" class="load-peg" />' });

            data = Documento
            data2 = $('#DDlTipodocumento  :selected').val()

            $.ajax({
                url: '/demandaenlinea/Demanda/ConsultarAbogado',
                type: "GET",
                dataType: "json",
                contentType: "application/json; charset=utf-8",
                data: { Documento: data, Tipodocumento: data2 },
                cache: false,

                success: function (result) {
                    $.unblockUI();
                    if (result.result.numeroTarjetaProfesional != null) {
                        $("#PrimerNombre").val(result.result.primerNombre)
                        $("#SegundoNombre").val(result.result.segundoNombre)
                        $("#PrimerApellido").val(result.result.primerApellido)
                        $("#SegundoApellido").val(result.result.segundoApellido)
                        $("#TarjetaProfesional").text("Tarjeta Profesional");
                        $("#Caracter").html("El Apoderado cuenta con tarjeta profesional." + '<br />' + "Abogado Vigente.");
                        $("#NumeroTarjeta").text(result.result.numeroTarjetaProfesional);
                        $("#IdDireccion").val(result.result.direccion)
                        $("#IdTelefono").val(result.result.telefono)
                        $("#IdEmail").val(result.result.email)
                        $("#PrimerNombre").focus();
                    }
                    else {
                        if (result.result.motivoNoVigencia == null) {
                            if (result.result.idError != 0) {
                                $.confirm({
                                    icon: 'fa fa-spinner fa-spin',
                                    title: 'Error Consulta Apoderado',
                                    content: result.result.textError,
                                    type: 'purple',
                                    typeAnimated: true,
                                    buttons: {
                                        Continuar: {
                                            btnClass: 'btn-purple',
                                            action: function () {
                                                $("#DocumentodeIdendificacion").val("");
                                                $("#DDlTipodocumento").focus();
                                            }
                                        },
                                    }
                                });
                            }
                            else {
                                $("#Caracter").html("El Apoderado no tiene tarjeta profesional." + '<br />' + "Valide el número de documento.");
                                $("#DocumentodeIdendificacion").focus();
                                $("#Caracter").css('color', 'Red');
                                $("#DocumentodeIdendificacion").text("");
                            }
                        }
                        else if (result.result[0].motivoNoVigencia == "Licencia Temporal") {
                            $("#TarjetaProfesional").text(result.result.motivoNoVigencia);
                            $("#Caracter").html("El Apoderado cuenta con tarjeta profesional." + '<br />' + "Abogado Vigente.");
                            $("#PrimerNombre").focus();
                        }
                    }
                }, //End of AJAX Success function

                failure: function (data) {
                    console.log(data);
                },
                error: function (data) {
                    console.log(data);
                }
            });
        }

        // departamento
        $("#DdlDepartamento").on('blur', function () {
            if ($("#DdlDepartamento :selected").val() == "-1") {
                $("#errorDdlDepartamento").hide().removeClass('hide').slideDown('fast');
                return false;
            }
            $("#errorDdlDepartamento").hide();
        });

        // Ciudad
        $("#DDlCiudad").on('blur', function () {
            if ($("#DDlCiudad :selected").val() == "-1" || $("#DDlCiudad :selected").val() == "") {
                $("#errorDDlCiudad").hide().removeClass('hide').slideDown('fast');
                return false;
            }
            $("#errorDDlCiudad").hide();
        });

        //Especialidad
        $("#DDlEspecialidad").on('blur', function () {
            if ($("#DDlEspecialidad :selected").val() == "-1") {
                $("#errorDDlEspecialidad").hide().removeClass('hide').slideDown('fast');
                return false;
        }
            $("#errorDDlEspecialidad").hide();
        });

        //DavidOchoa INC2022-011
        //Localidad
        $("#DDlLocalidad").on('blur', function () {
            if ($("#DDlLocalidad :selected").val() == "-1") {
                $("#errorDDlLocalidad").hide().removeClass('hide').slideDown('fast');
                return false;
            }
            $("#errorDDlLocalidad").hide();
        });

        //Proceso
        $("#DDlProceso").on('blur', function () {
            if ($("#DDlProceso :selected").val() == "-1") {
                $("#errorDDlProceso").hide().removeClass('hide').slideDown('fast');
                return false;
            }
            $("#errorDDlProceso").hide();
        });

        //TipoArchivo
        $("#DDlTipoArchivo").on('blur', function () {
            if ($("#DDlTipoArchivo :selected").val() == "-1") {
                $("#errorDDlTipoArchivo").hide().removeClass('hide').slideDown('fast');
                return false;
            }
            $("#errorDDlTipoArchivo").hide();
        });

        function mayusculas(e) {
            e.value = e.value.toUpperCase();
        }

        $("#DDlCiudad").change(function () {
            var data = $("#DDlCiudad").val();
            $.ajax({
                url: '/demandaenlinea/Demanda/ConsultarHorarioCiudad',
                type: "GET",
                dataType: "json",
                contentType: "application/json; charset=utf-8",
                data: { Ciudad: data },
                cache: false,
                success: function (result) {
                    $.unblockUI();
                    if (result.data && result.result.horaIniLaboral != null) {
                        $.confirm({
                            title: false,
                            content:
                                '<div style="text-align: justify"> <strong>Restricción de Horario</strong><br/>' +
                                '<div style="text-align: justify">Para la ciudad de ' + $("#DDlCiudad  :selected").text().toUpperCase() + "" + result.result.configurarTodo + '</div>',
                            type: 'purple',
                            typeAnimated: true,
                            buttons: {
                                sALIR: {
                                    btnClass: 'btn-purple',
                                    action: function () { window.location.reload(); }
                                },
                            }
                        });
                    }
                    GetEspecialidad(data);
                },

                failure: function (data) {
                    console.log(data);
                },
                error: function (data) {
                    console.log(data);
                }
            });
        });

        $("#DDlEspecialidad").change(function () {
            var IdProceso = $("#DDlEspecialidad").val();
            ValidarConsejoEstado()
            GetProceso(IdProceso);

            //DavidOchoa INC2022-011
            accionDDlTipoSujeto();

            if ($("#DDlEspecialidad :selected").val() == "1232") {
                var Idciudad = $("#DDlCiudad").val();
                GetLocalidad(Idciudad);
            } else {
                GetLocalidad(0);
                var accion = obtenerAccionados()

                if (accion[2]) {
                    for (var i = accion[0].length - 1; i >= 0; i--) {
                        if (accion[0][i].IdTipoSujeto.toString() == "1226") {
                            var table = $("#tblCustomers")[0];
                            table.deleteRow(i + 1);
                        }
                    }
                }
            }
        });

        $("#DDlTipoSujeto").change(function () {
            Limpiar();
            GetTipoDocumento();
            DisableTipoDocumento();
        });

        $("#DDlTipoPersona").change(function () {
            Limpiar();
            GetTipoDocumento();
            DisableTipoDocumento();


        });

        var valorTipoDocumento = {};
        $("#DDlTipodocumento").change(function () {
            if ($("#DDlTipodocumento :selected").val() == "1168") {
                $(".numDocumento").hide();
                $("#DocumentodeIdendificacion").val("0")
            }
            else {
                $(".numDocumento").show();
                $("#DocumentodeIdendificacion").val("")
            }
            var Iddata = "0";
            if ($("#DDlTipodocumento :selected").val() != "-1") {
                Iddata = $("#DDlTipodocumento :selected").val()
            }
            $.ajax({
                method: "GET",
                url: '/demandaenlinea/Demanda/TipoDocumento?Id=' + Iddata,
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                data: {},
                success: function (data) {
                    data.result.forEach(item => {
                        valorTipoDocumento["Id"] = item.idCatalogoDetalle
                        valorTipoDocumento["Descripcion"] = item.descripcion
                        valorTipoDocumento["valor"] = item.valor
                        valorTipoDocumento["valor1"] = item.valor1
                        valorTipoDocumento["IdPadre"] = item.idCatalogoDetallepadre
                    });
                }, //End of AJAX Success function
                failure: function (data) {
                    console.log(data);
                },
                error: function (data) {
                    console.log(data);
                }
            });
        });

        function accionDDlTipoSujeto() {
            $("#DDlLocalidad").val("-1")
            $(".DvLocalidad").hide(); //DavidOchoa INC2022-011

            if ($("#DDlTipoSujeto :selected").val() == "1225" || $("#DDlTipoSujeto :selected").val() == "1227") {
                $(".IdEmail").show();
                $("#DDlTipodocumento").find("option[value='1168']").remove();
                if ($("#DDlTipoSujeto :selected").val() == "1227") {
                    $("#DDlTipoPersona").val("1164");
                }
            }
            else if ($("#DDlTipoSujeto :selected").val() == "1226"){
                $(".IdEmail").hide();

                if ($('#DDlEspecialidad  :selected').val() == "-1") {
                    $("#DDlTipoSujeto").val("-1")
                    return ConfirmaDatos("DDlEspecialidad", "Seleccione la Especialidad")
                }
                //DavidOchoa INC2022-011
                if ($("#DDlEspecialidad :selected").val() == "1232") {
                    $(".DvLocalidad").show();

                    var accion = obtenerAccionados()

                    if (accion[0].length != 0 && accion[2]) {
                        for (var i = 0; i <= accion[0].length - 1; i++) {
                            if (accion[0][i].IdTipoSujeto == "1226") {
                                $('select#DDlLocalidad option:contains("' + accion[0][i].Localidad.toString() + '")').prop('selected', true);
                                $("#DDlLocalidad").prop("disabled", true);
                            }
                        }
                    }
                    else {
                        $("#DDlLocalidad").prop("disabled", false);
                        $('select#DDlLocalidad option:contains("Juzgados del Centro")').prop('selected', true);
                    }

                }

            }
            GetTipoDocumento()
            DisableTipoDocumento()
        }

        function validaAdjunto(input) {
            if (input.length > 0) {
                $('#spnmsg').text('').hide();
            }
        }

        var bandera = false;
        var incremente = 0;
        var Msn10Mg = true;
        var valArray = new Array();
        var convertir = 1024 * 1024
        var limite = 50;
        var CapacidadActual = 0;
        var extender = 10;

        $("body").on("click", "#btnAddfile", function () {
            if ($('#DDlTipoArchivo  :selected').val() == "-1") {
                return ConfirmaDatos("DDlTipoArchivo", "Debe seleccionar el tipo de archivo")
            }
            debugger
            var acepta = false;
            var idarchivo = "ArchivoFile";
            var idarchivo2 = idarchivo + incremente.toString();
            acepta = validarArchivo(idarchivo2)
            if (acepta == false) {
                $("#" + idarchivo2).replaceWith($("#" + idarchivo2).val('').clone(true));
                return false;
            }
            agregarArchivo(idarchivo2);
            $("#" + idarchivo2).hide();
            var btnfile = $("<input />");
            incremente++;
            btnfile.attr("type", "file");
            btnfile.attr("name", idarchivo + incremente.toString());
            btnfile.attr("id", idarchivo + incremente.toString());
            btnfile.attr("onclick", "validaAdjunto(this.value)");
            $(".insertFile").append(btnfile);
            if (total >= 0) {
                $("#Capacidad").text(total.toFixed(4))
            }
            CapacidadActual = total;
            $("#DDlTipoArchivo").val("-1");

            if (total.toFixed() <= 11 && Msn10Mg == true) {
                Msn10Mg = false
                $.confirm({
                    icon: 'fa fa-spinner fa-spin',
                    title: 'Alerta Cargue Archivos',
                    content: 'Le quedan menos de 10 MB de Cargue de Archivos.',
                    type: 'purple',
                    typeAnimated: true,
                    buttons: {
                        Continuar: {
                            btnClass: 'btn-purple',
                        },
                    }
                });
            }
            $("#tblFiles").show();
        });

        function RemoveFile(button) {

            if (button != null) {
                //Determine the reference of the Row using the Button.
                var row = $(button).closest("TR");
                var name = $("TD", row).eq(0).html();
                var idFile = $("TD", row).eq(4).html();
                $('#spnmsg').text('').hide();

                if (confirm("Esta seguro que quiere eliminar el Archivo:")) {
                    //Get the reference of the Table.

                    var tamanioArchivo = convertir * $("TD", row).eq(1).html()
                    var capacidad = convertir * CapacidadActual;
                    var total = parseFloat((capacidad) + parseFloat(tamanioArchivo)) / parseFloat(convertir)
                    if (total.toFixed(4) >= limite.toFixed(4) || $("#tblFiles TBODY TR").length == 0) {
                        $("#Capacidad").text(limite)
                    }
                    else {
                        $("#Capacidad").text(total.toFixed(4))
                        var valor = extender + total;
                        if (total > -10) {
                            $("#Capacidad").text(valor.toFixed(4))
                        }
                    }
                    CapacidadActual = total;
                    if (CapacidadActual > 0) {
                        $("#Adicionar").hide();
                    }
                    var table = $("#tblFiles")[0];
                    //Delete the Table row using it's Index.
                    table.deleteRow(row[0].rowIndex);
                    $("#" + idFile).remove();
                    valArray = valArray.filter(function (i) { return i !== "#" + idFile });

                    if (name.includes('DEMANDA')) {
                        bandera = false;
                        $("#tblFiles TBODY TR").each(function () {
                            var row = $(this);
                            if (row.find("TD").eq(0).html().includes('DEMANDA')) {
                                bandera = true;
                            }
                        });
                    }
                }

                if ($("#tblFiles").find('tbody tr').length == 0) {
                    $("#tblFiles").hide();
                }
            } else {
                $("#tblFiles> tbody").empty();
                valArray = [];
                $("#tblFiles").hide();
                bandera = false;
            }
        };

        function RemoveAccionado(button) {
            //Determine the reference of the Row using the Button.
            var row = $(button).closest("TR");
            var name = $("TD", row).eq(3).html();
            if (confirm("Esta seguro que quiere eliminar el registro")) {
                //Get the reference of the Table.
                var table = $("#tblCustomers")[0];
                //Delete the Table row using it's Index.
                table.deleteRow(row[0].rowIndex);
            }

            if ($("#tblCustomers").find('tbody tr').length == 0) {
                $("#tblCustomers").hide();
            }
        };

        $("body").on("click", "#btnSave", function () {
            //Loop through the Table rows and build a JSON array.
            var customers = new Array();
            $("#tblCustomers TBODY TR").each(function () {
                var row = $(this);
                var customer = {};
                customer.Name = row.find("TD").eq(0).html();
                customer.Country = row.find("TD").eq(1).html();
                customers.push(customer);
            });

            //Send the JSON array to Controller using  .
            $.ajax({
                type: "POST",
                url: "/Home/InsertCustomers",
                data: JSON.stringify(customers),
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (r) {
                    alert(r + " record(s) inserted.");
                }
            });
        });

        function GetDepartamentos() {
            $.ajax({
                method: "Get",
                url: '/demandaenlinea/Demanda/Departamento',
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                data: {},
                success: function (data) {
                    $("#DdlDepartamento").empty();
                    $("#DdlDepartamento").append('<option value="-1">Seleccione...</option>')

                    data.result.forEach(item => {
                        let option = $('<option>');
                        option.val(item.idCatalogoDetalle);
                        option.html(item.descripcion);

                        $('select#DdlDepartamento').append(option);
                        $('select#DdlDepartamento option:contains("BOGOTA")').prop('selected', true);

                        var Idciudad = $("#DdlDepartamento").val();
                        GetCiudades(Idciudad);
                    });
                }, //End of AJAX Success function

                failure: function (data) {
                    console.log(data);
                },
                error: function (data) {
                    console.log(data);
                }
            });
        };

        function GetCiudades(IdDepartamento) {
            $.ajax({
                method: "GEt",
                url: '/demandaenlinea/Demanda/Ciudad?IdDepartamento='+IdDepartamento,
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                data: {},
                success: function (data) {
                    $("#DDlCiudad").empty();
                    $("#DDlCiudad").append('<option value="-1">Seleccione...</option>')

                    data.result.forEach(item => {
                        let option = $('<option>');
                        option.val(item.idCatalogoDetalle);
                        option.html(item.descripcion);

                        $('select#DDlCiudad').append(option);
                        //$('select#DDlCiudad option:contains("BOGOTA")').prop('selected', true);
                    });

                }, //End of AJAX Success function

                failure: function (data) {
                    console.log(data);
                },
                error: function (data) {
                    console.log(data);
                }
            });
        };

        //DavidOchoa INC2022-011
        function GetLocalidad(IdCiudad) {
            $.ajax({
                method: "GEt",
                url: '/demandaenlinea/Demanda/Localidad?IdCiudad=' + IdCiudad,
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                data: {},
                success: function (data) {
                    $("#DDlLocalidad").empty();
                    $("#DDlLocalidad").append('<option value="-1">Seleccione...</option>')

                    data.result.forEach(item => {
                        let option = $('<option>');
                        option.val(item.idCatalogoDetalle);
                        option.html(item.descripcion);

                        $('select#DDlLocalidad').append(option);
                    });

                }, //End of AJAX Success function

                failure: function (data) {
                    console.log(data);
                },
                error: function (data) {
                    console.log(data);
                }
            });
        };

        function GetTipoSujeto() {
            $.ajax({
                method: "Get",
                url: '/demandaenlinea/Demanda/TipoSujeto',
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                data: {},
                success: function (data) {
                    $("#DDlTipoSujeto").empty();
                    $("#DDlTipoSujeto").append('<option value="-1">Seleccione...</option>')
                    if (!data.data) {
                        data.result.forEach(item => {
                            let option = $('<option>');
                            option.val(item.idCatalogoDetalle);
                            option.html(item.descripcion);

                            $('select#DDlTipoSujeto').append(option);
                            $('select#DDlTipoSujeto option:contains("Demandante")').prop('selected', true);
                            $("#DDlTipoSujeto").prop("disabled", true);
                        });
                    }
                }, //End of AJAX Success function

                failure: function (data) {
                    console.log(data);
                },
                error: function (data) {
                    console.log(data);
                }
            });

        };

        //let EspecialidadEmailArr = {};
        function GetEspecialidad(data) {
            $.ajax({
                method: "Get",
                url: '/demandaenlinea/Demanda/Especialidad',
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                data: { Ciudad: data },
                success: function (data) {
                    $("#DDlEspecialidad").empty();
                    $("#DDlEspecialidad").append('<option value="-1">Seleccione...</option>')

                    data.result.forEach(item => {
                        //EspecialidadEmailArr[item.idCatalogoDetalle] = item.valor

                        let option = $('<option>');
                        option.val(item.idCatalogoDetalle);
                        option.html(item.descripcion);
                        $('select#DDlEspecialidad').append(option);
                    });

                }, //End of AJAX Success function

                failure: function (data) {
                    console.log(data);
                },
                error: function (data) {
                    console.log(data);
                }
            });
        };

        function GetTipoArchivo() {
            $.ajax({
                method: "Get",
                url: '/demandaenlinea/Demanda/TipoArchivo',
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                data: {},
                success: function (data) {
                    $("#DDlTipoArchivo").empty();
                    $("#DDlTipoArchivo").append('<option value="-1">Seleccione...</option>')
                    data.result.forEach(item => {
                        let IdCatalogoDetalle = item.idCatalogoDetalle
                        let valor = item.valor

                        let option = $('<option>');
                        option.val(item.idCatalogoDetalle);
                        option.html(item.descripcion);
                        $('select#DDlTipoArchivo').append(option);
                    });

                }, //End of AJAX Success function

                failure: function (data) {
                    console.log(data);
                },
                error: function (data) {
                    console.log(data);
                }
            });
        };

        function GetProceso(IdEspecialidad) {
            $.ajax({
                method: "Get",
                url: '/demandaenlinea/Demanda/Proceso?IdEspecialidad=' + IdEspecialidad,
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                data: {},
                success: function (data) {
                    $("#DDlProceso").empty();
                    $("#DDlProceso").append('<option value="-1">Seleccione...</option>')

                    data.result.forEach(item => {
                        let option = $('<option>');
                        option.val(item.idCatalogoDetalle);
                        option.html(item.descripcion);

                        $('select#DDlProceso').append(option);
                    });
                }, //End of AJAX Success function

                failure: function (data) {
                    console.log(data);
                },
                error: function (data) {
                    console.log(data);
                }
            });
        };

        //Tipos de discapacidad
        function GetTipoDiscapacidad() {
            $.ajax({
                method: "GET",
                 url: '/demandaenlinea/Demanda/TipoDiscapacidad',
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                data: {},
                success: function (data) {
                    $("#DDlTipodiscapacidad").empty();
                    $("#DDlTipodiscapacidad").append('<option value="-1">Seleccione...</option>')
                    data.result.forEach(item => {
                     let option = $('<option>');
                     option.val(item.idCatalogoDetalle);
                     option.html(item.descripcion)
                        $('select#DDlTipodiscapacidad').append(option);
                    });
                }, //End of AJAX Success function
                failure: function (data) {
                    console.log(data);
                },
                error: function (data) {
                    console.log(data);
                }
            });
        }

        let TipoDocumentoArr = {};
        function GetTipoDocumento() {
            var codigo = null;
            var descripcion = null;
            TipoDocumentoArr = {};
            $.ajax({
                method: "GET",
                url: '/demandaenlinea/Demanda/TipoDocumento',
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                data: {},
                success: function (data) {
                    $("#DDlTipodocumento").empty();
                    $("#DDlTipodocumento").append('<option value="-1">Seleccione...</option>')
                    data.result.forEach(item => {
                        let option = $('<option>');
                        let IdCatalogoDetalle = item.idCatalogoDetalle;
                        let Codigo = item.codigo;
                        TipoDocumentoArr[IdCatalogoDetalle] = Codigo

                        if ($("#DDlTipoPersona").val() == item.idCatalogoDetallePadre){
                            option.val(item.idCatalogoDetalle);
                            option.html(item.descripcion);
                            $('select#DDlTipodocumento').append(option);
                        }

                        if ((item.idCatalogoDetallePadre == "0" || item.idCatalogoDetallePadre == undefined) && $("#DDlTipoSujeto").val() == "1226") {
                            codigo = item.idCatalogoDetalle;
                            descripcion = item.descripcion;
                        }

                        var listDocApoderado = [1161, 1163];

                        if ($("#DDlTipoSujeto").val() == "1227" && !listDocApoderado.includes(item.idCatalogoDetalle) == true) {
                            $("#DDlTipodocumento  option[value='" + item.idCatalogoDetalle + "']").remove();
                        }

                        if ($("#DDlTipoSujeto").val() == "1225" || $("#DDlTipoSujeto").val() == "1227"){
                            $("#DDlTipodocumento  option[value='1168']").remove();
                        }
                    });

                    if (codigo != null) {
                        $("#DDlTipodocumento").append('<option value="' + codigo + '">' + descripcion + '</option>')
                    }
                }, //End of AJAX Success function

                failure: function (data) {
                    console.log(data);
                },
                error: function (data) {
                    console.log(data);
                }
            });
        };

        function DisableTipoDocumento() {
            $(".numDocumento").show();
            $(".DvJuridico").hide();
            $(".DvNatural").hide();
            $(".DvDiscapacidad").hide();

            $("#DocumentodeIdendificacion").val("");
            $("#DDlTipodiscapacidad").val("-1");

            if ($("#DDlTipoPersona :selected").val() == "1164") {
                $(".DvNatural").show();
                $(".DvDiscapacidad").show();
                $("#DDlTipodiscapacidad").val("1426");
            }
            if ($("#DDlTipoPersona :selected").val() == "1165") {
                $(".DvJuridico").show();
            }
        }

        function GetPersona() {
            $.ajax({
                method: "GET",
                url: '/demandaenlinea/Demanda/TipoPersona',
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                data: {},
                success: function (data) {
                    $("#DDlTipoPersona").empty();
                    $("#DDlTipoPersona").append('<option value="-1">Seleccione...</option>')
                    data.result.forEach(item => {
                        let option = $('<option>');
                        option.val(item.idCatalogoDetalle);
                        option.html(item.descripcion)
                        $('select#DDlTipoPersona').append(option);
                    });
                },
                failure: function (data) {
                    console.log(data);
                },
                error: function (data) {
                    console.log(data);
                }
            });
        };

        function GetExtension(Extension) {
            var valida = ($.ajax({
                method: "POST",
                url: '/demandaenlinea/Demanda/TipoExtension?Extension=' + Extension,
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                data: {},
                async: false,
            }).responseText);

            return valida;
        };

        function obtenerAccionados() {
            accionados = new Array();
            var Demandante = false;
            var Demandado = false;
            var Apoderado = false;
            $("#tblCustomers TBODY TR").each(function () {
                var row = $(this);
                var accionado = {};
                accionado.TipoPersona = row.find("TD").eq(0).html();
                accionado.IdTipoPersona = row.find("TD").eq(1).html();
                accionado.TipoSujeto = row.find("TD").eq(2).html();
                accionado.IdTipoSujeto = row.find("TD").eq(3).html();
                accionado.TipoDocumento = row.find("TD").eq(4).html();
                accionado.IdTipoDocumento = row.find("TD").eq(5).html();
                accionado.DocumentoIdentidad = row.find("TD").eq(6).html();
                accionado.NombreJuridico = row.find("TD").eq(8).html();
                accionado.PrimerNombre = row.find("TD").eq(9).html();
                accionado.SegundoNombre = row.find("TD").eq(10).html();
                accionado.PrimerApellido = row.find("TD").eq(11).html();
                accionado.SegundoApellido = row.find("TD").eq(12).html();
                accionado.Direccion = row.find("TD").eq(15).html();
                accionado.Telefono = row.find("TD").eq(16).html();
                accionado.Email = row.find("TD").eq(17).html();

                if (accionado.IdTipoSujeto == '1227') {
                    accionado.MotivoNoVigencia = row.find("TD").eq(18).html();
                    accionado.NumeroTarjetaProfesional = row.find("TD").eq(19).html();
                } else {
                    accionado.MotivoNoVigencia = null;
                    accionado.NumeroTarjetaProfesional = null;
                }
                accionado.TipoDiscapacidad = row.find("TD").eq(20).html();
                accionado.IdTipoDiscapacidad = row.find("TD").eq(21).html();
                accionados.push(accionado);
                if (accionado.IdTipoSujeto == "1225") {
                    Demandante = true
                }
                if (accionado.IdTipoSujeto == "1226") {
                    Demandado = true
                }
                if (accionado.IdTipoSujeto == "1227") {
                    Apoderado = true
                }

                //DavidOchoa INC2022-011
                accionado.Localidad = ""
                accionado.IdLocalidad = "-1";
                if (row.find("TD").eq(23).html() != "-1") {
                    accionado.Localidad = row.find("TD").eq(22).html();
                    accionado.IdLocalidad = row.find("TD").eq(23).html();
                }

            });
            return [accionados, Demandante, Demandado, Apoderado]
        }

        var accionados;

        function guardarTodo() {
            $.blockUI({ message: '<img src="https://procesojudicial.ramajudicial.gov.co/demandaenlinea/images/loadingblack.gif" class="load-peg" />' });
            var fil = new Array();
            var archivos = new Array()
            try {
                    obtenerAccionados();
                    if (valArray.length != 0) {
                        for (var i = 0; i < valArray.length; i++) {

                            let d = $(valArray[i]).get(0).files
                            archivos.push(d)
                            d = ""
                        }
                    }

                    if (archivos.length != 0) {
                        for (var i = 0; i < archivos.length; i++) {

                            let d = archivos[i][0]
                            fil.push(d)
                            d = ""
                        }
                    }

                    var archivitos = new Array();

                    $("#tblFiles TBODY TR").each(function () {
                        var row = $(this);
                        var archivito = {};
                        archivito.NombreArchivo = row.find("TD").eq(0).html();
                        archivito.Tamanio = row.find("TD").eq(1).html();
                        archivito.Formato = row.find("TD").eq(2).html();
                        archivito.Titulo = row.find("TD").eq(3).html();
                        archivitos.push(archivito);
                    });

                    var formData = new FormData();

                    if (fil.length != 0) {
                        for (var i = 0; i < fil.length; i++) {
                            fil[0].name
                            formData.append(fil[i].name, fil[i]);
                        }
                    }

                    formData.append('Departamento', $("#DdlDepartamento  :selected").text().toUpperCase());
                    formData.append('IdDepartamento', $("#DdlDepartamento").val().toUpperCase());
                    formData.append('IdCiudad', $("#DDlCiudad").val().toUpperCase());
                    formData.append('Ciudad', $("#DDlCiudad  :selected").text().toUpperCase());
                    formData.append('IdCatalogoDeClaseProceso', $("#DDlProceso").val().toUpperCase());
                    formData.append('CatalogoDeClaseProceso', $("#DDlProceso  :selected").text().toUpperCase());
                    formData.append('IdCatalogoEspecialidad', $("#DDlEspecialidad").val().toUpperCase());
                    formData.append('CatalogoEspecialidad', $("#DDlEspecialidad  :selected").text().toUpperCase());
                    formData.append('Accionados', JSON.stringify(accionados));
                    formData.append('archivitos', JSON.stringify(archivitos));

                    //R-000025
                    //Desarrollador por: Edwin Ricardo Gonzalez Luque
                    //Stefanini
                    //Tipo de discapacidades
                    formData.append('IdTipodiscapacidad', $("#DDlTipodiscapacidad").val());
                    formData.append('Tipodiscapacidad', $("#DDlTipodiscapacidad  :selected").text().toUpperCase());
                    //Fin R-000025

                    $.ajax({
                        url: '/demandaenlinea/Demanda/Insertar',
                        type: "POST",
                        dataType: "json",
                        contentType: false,
                        processData: false,
                        enctype: 'multipart/form-data',
                        data: formData,
                        cache: false,
                        success: function(result) {
                            $.unblockUI();
                            if (result.data == true) {
                                $.confirm({
                                    title: 'Recepción de Demanda en Línea',
                                    content: result.error,
                                    type: 'purple',
                                    typeAnimated: true,
                                    buttons: {
                                        Continuar: {
                                            btnClass: 'btn-purple',
                                            action: function () {
                                                RemoveFile(null);
                                                $("#Capacidad").text(limite);
                                                CapacidadActual = limite;
                                                if (result.rload) {
                                                    window.location.reload();
                                                }
                                            }
                                        },
                                    }
                                });
                            } else {
                                $.confirm({
                                    title: 'Recepción de Demanda en Línea',
                                    content: 'Su Tramite ha sido recibida con éxito con el número de recibo: ' + result.result,
                                    type: 'purple',
                                    typeAnimated: true,
                                    buttons: {
                                        Finalizar: {
                                            btnClass: 'btn-purple',
                                            action: function () { window.location.reload(); }
                                        },
                                    }
                                });
                            }
                        },
                        error: function(jqXHR, textStatus, error) {
                            $('.model-status').text("Estado: Error inesperado");
                        }
                    });
            }
            catch (error) {
                console.log(error);
                result.error;
            }

        }

        function Save() {
            $.confirm({
                title: false,
                columnClass: 'col-md-6 col-md-offset-3',
                content: '<div style="text-align: justify"> <strong>A través de este portal solo se recibe la acción, demanda o solicitud que luego será enviada al juez competente.</strong></div>' +
                    '</br>' +
                    '<div style="text-align: justify"> <strong>Se recogen unos datos básicos en el formulario y en los documento(s) que anexe debe incluir la demanda, acción o solicitud, y eventuales anexos.</strong></div>' +
                    '</br>' +
                    '<div style="text-align: justify"> <strong>Recuerde que debe cumplir con los requisitos legales para la presentación de cada acción.</strong></div>' +
                    '</br>' +
                    '<div style="text-align: justify"> <strong>Las comunicaciones, notificaciones, decisiones, recursos, incidentes se tramitarán por los medios más expeditos que establezca el juez competente, con prevalencia del correo electrónico institucional.</strong></div>' +
                    '</br>' +
                    '</br>' +
                    '</br>'+
                    '¿Esta seguro que desea continuar?',
                buttons: {
                    Si: {

                        btnClass: 'btn-purple',
                        action: function () { guardarTodo() }
                    },
                    No: {
                        btnClass: 'btn-purple',
                        text: 'No', // With spaces and symbols
                        action: function () {
                            $.alert('Valide su información');
                        }
                    }
                }
            });
        };

        function ValidarCorreo() {
            $('#Email').val("")
            //$("#xmail").hide().removeClass('hide').slideDown('fast');
            if ($('#IdEmail').val() != "") {
                var si = caracteresCorreoValido($('#IdEmail').val(), '#xmail')
                if (si) {
                    $.blockUI({ message: '<img src="https://procesojudicial.ramajudicial.gov.co/demandaenlinea/images/loadingblack.gif" class="load-peg" />' });
                    EnviarValidarCorreo($('#IdEmail').val(), 2)
                    $("#xmail").hide();
                }
            }
            else {
                $("#xmail").hide().removeClass('hide').slideDown('fast');
            }
        }

        function ReenviarEmail() {
            $.blockUI({ message: '<img src="https://procesojudicial.ramajudicial.gov.co/demandaenlinea/images/loadingblack.gif" class="load-peg" />' });
            $.confirm({
                icon: 'fa fa-spinner fa-spin',
                title: false,
                content: 'Acepta reenviar el código de confirmación',
                type: 'purple',
                typeAnimated: true,
                buttons: {
                    Continuar: {
                        btnClass: 'btn-purple',
                        action: function () {
                            EnviarValidarCorreo($('#IdEmail').val(), 1)
                        }
                    },
                    Cancelar: function () {
                        //close
                    },
                },
            });
        }

        function EnviarValidarCorreo(Email, Reenviar) {
            $.ajax({
                url: '/demandaenlinea/Demanda/EnviarValidarCorreo',
                type: "GET",
                dataType: "json",
                contentType: "application/json; charset=utf-8",
                data: { Email: Email, Reenviar: Reenviar },
                cache: false,
                success: function (result) {
                    $.unblockUI();
                    if (result.data) {
                        $.confirm({
                            icon: 'fa fa-spinner fa-spin',
                            title: false,
                            content: 'Ocurrio un problema a validar el correo, Revise he Intente nuevamente',
                            type: 'purple',
                            typeAnimated: true,
                            buttons: {
                                Continuar: {
                                    btnClass: 'btn-purple',
                                    action: function () { $("#IdEmail").val($('#ConfirmaEmail').val()); }
                                },
                            }
                        });
                    } else if (Reenviar == 2) {
                        ValidarCodigoCorreo(result.envio);
                    }

                },
                error: function (jqXHR, textStatus, error) {
                    $('.model-status').text("Estado: Error inesperado");
                }
            })
        }

        function ValidarCodigoCorreo(si) {
            if (si) {
                $.confirm({
                    icon: 'fa fa-spinner fa-spin',
                    title: false,
                    content: 'Correo Electronico Validado con Éxito',
                    type: 'purple',
                    typeAnimated: true,
                    buttons: {
                        Continuar: {
                            btnClass: 'btn-purple',
                            action: function () { $("#ConfirmaEmail").val($('#IdEmail').val()); }
                        },
                    }
                });
            } else {
                $.confirm({
                    icon: 'fa fa-spinner fa-spin',
                    title: 'Confirma tu Email',
                    content: '' +
                        '<form action="">' +
                        '<div>' +
                        '<div style="text-align: justify"> <strong>Ingresa el código de confirmación</strong>' +
                        '<div style="text-align: justify">El email de confirmación se ha enviado a ' + $('#IdEmail').val() + ', revisa tu bandeja de entrada o correo no deseado</div>' +
                        '<div style="text-align: justify">¿No lo Encuentras? ' +
                        '<a id="ReenviarEmail" title="Haga clic para Reenviar" href="#" onclick="ReenviarEmail();return false;" >Reenviar Email</a></div>' +
                        '<br />' +
                        '<label class="col-md-2 control-label asterisk"></label>' +
                        '<input id="CodigoCorreo" type="number" placeholder="Código" class="form-control" min="1" max="100000000" required />' +
                        '</div>' +
                        '</form>',
                    type: 'purple',
                    typeAnimated: true,
                    buttons: {
                        Continuar: {
                            btnClass: 'btn-purple',
                            action: function () {
                                ConfirmarCorreo($('#IdEmail').val(), $("#CodigoCorreo").val());
                            }
                        },
                        Cancelar: function () {
                        },
                    },
                });
            }
        }

        function ConfirmarCorreo(Email, Codigo) {
            if (Codigo != "" && Codigo.length < 8) {
                $.ajax({
                    url: '/demandaenlinea/Demanda/ComprobarCodigoCorreo',
                    type: "GET",
                    dataType: "json",
                    contentType: "application/json; charset=utf-8",
                    data: { Email: Email, Codigo: Codigo },
                    cache: false,
                    success: function (result) {
                        if (result.data) {
                            $.confirm({
                                icon: 'fa fa-spinner fa-spin',
                                title: false,
                                content: 'El código es incorrecto o ha caducado, reenvié el código e intente nuevamente',
                                type: 'purple',
                                typeAnimated: true,
                                buttons: {
                                    Continuar: {
                                        btnClass: 'btn-purple',
                                        action: function () {
                                            ValidarCodigoCorreo(false);
                                        }
                                    },
                                },
                            });
                        }
                        else {
                            $("#ConfirmaEmail").val($('#IdEmail').val())
                        }
                    },
                    error: function (jqXHR, textStatus, error) {
                        $('.model-status').text("Estado: Error inesperado");
                    }
                });
            } else {
                $.confirm({
                    icon: 'fa fa-spinner fa-spin',
                    title: false,
                    content: 'El código es incorrecto o ha caducado, reenvié el código e intente nuevamente',
                    type: 'purple',
                    typeAnimated: true,
                    buttons: {
                        Continuar: {
                            btnClass: 'btn-purple',
                            action: function () {
                                ValidarCodigoCorreo(false);
                            }
                        },
                    },
                });
            }
        }

        function ConfirmaDatos(Campo, Mensaje) {
            $.confirm({
                icon: 'fa fa-spinner fa-spin',
                title: false,
                content: Mensaje + ".",
                type: 'purple',
                typeAnimated: true,
                buttons: {
                    Continuar: {
                        btnClass: 'btn-purple',
                        action: function () { $("#" + Campo).focus(); }
                    },
                }
            });
        }

	</script>

</body>

</html>